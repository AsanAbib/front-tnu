<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Установка ubuntu</title>
    <link href='http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
    <style>
        body {
            font-family: 'PT Sans', sans-serif;
            font-size: 16px;
            line-height: 20px;

            margin: 0;

            color: #444;
            background: #fff;
        }

        .article
        {
            width: 800px;
            margin: 0 auto 60px;
        }

        .article__head
        {
            font-size: 24px;
            line-height: 28px;
        }

        .article__image
        {
            display: block;

            margin: 10px auto;
        }

        .article__code
        {
            margin: 10px -10px;
            padding: 5px 10px;

            background: #fff5bb;
        }
    </style>
</head>
<body>
    <div class="article">
        <h3 class="article__head">Подготовка</h3>
        <p>Разумеется, если у вас дома стоит уже какая-нибудь версия Linux или Mac OS, то никаких виртуалок заводить
            не нужно, все необходимое для полноценной работы в консоли уже есть.</p>
        <p>Для установки новой виртуальной машины с Linux нам потребуется:</p>
        <ul>
            <li><b>Сама программа для запуска виртуальных машин.</b><br>
                Для этой цели нам отлично подходит <a href="http://www.vmware.com/go/downloadplayer/">Vmware Player</a>.
                Хоть продукт и стоит денег, но для домашнего пользования является бесплатным. Можно, конечно, вместо
                Vmware Player использовать <a href="https://www.virtualbox.org/wiki/Downloads">VM VirtualBox</a>, но
                данная программа все же уступает в производительности Vmware Player.
            </li>
            <li><b>Установочный образ Ubuntu Linux.</b><br>
                Скачиваем <a href="https://help.ubuntu.com/community/Installation/MinimalCD">отсюда</a> образ для
                установки. Нам отлично подойдет Ubuntu 13.10 "Saucy Salamander" Minimal CD 30MB. Образ весит так мало,
                потому что содержит в себе базовые файлы для установки, а все остальное мы скачаем уже по ходу процесса.
                Разумеется, вы можете скачать с ubuntu.com полноценные образы и процесс самой установки, в принципе,
                отличаться не должен от приведенной ниже инструкции.
            </li>
        </ul>
        <br>
        <p>Предположим, что образ с Linux загружен, Vmware Player установлен. Запускаем программу и начинаем процесс
            создания новой виртуальной машины.</p>
        <p>Нажимаем справа в окне "Create a New Virtual Machine" и в появившемся диалоге указываем путь к образу с
            Ubuntu, который мы скачали.
            <img src="images/01.png" alt="" class="article__image">
        </p>
        <br>
        <p>Указываем тип гостевой системы: Linux, а в "Version" выбираем просто "Ubuntu":
            <img src="images/02.png" alt="" class="article__image">
        </p>
        <br>
        <p>Здесь мы можем задать имя новой виртуальной машины, например, "Ubuntu" и указать, где должны храниться
            ее файлы.
            <img src="images/03.png" alt="" class="article__image">
        </p>
        <br>
        <p>Теперь нам нужно указать, какой максимальный размер диска будет у виртуальной машины. Я указал 20 гб.
            Но это не значит, что сразу "скушается" 20 гигабайт: виртуальная машина будет увеличивать свой размер по
            мере необходимости, но не может превысить указанный лимит.
            <img src="images/04.png" alt="" class="article__image">
        </p>
        <br>
        <p>Финальный процесс создания виртуальной машины. Кстати, мы можем подравить некоторые ее характеристики, нажав
            "Customize Hardware" (об этом ниже):
            <img src="images/05.png" alt="" class="article__image">
        </p>
        <br>
        <p>Здесь мы можем отключить (сняв галочку Connect at power on) принтер и звуковую карту (разумеется, тоже
            виртуальные):
            <img src="images/06.png" alt="" class="article__image">
        </p>
        <br>
        <p>И заодно сразу настроим возможность общего доступа к файлам на вашем компьютере. Для этого перейдем на
            вкладку "Options" в настройках виртуальной машины и включим Shared Folders (переключить в Always Enabled).
            <img src="images/36.png" alt="" class="article__image">
        </p>
        <br>
        <p>Также нужно настроить, какие папки будут общими. Для этого нужно нажать кнопку Add и указать нужную папку
            (можно создать новую или указать существующую):
            <img src="images/37.png" alt="" class="article__image">
        </p>
        <br>
        <p>Включаем шару. Делать ее только для чтения не нужно:
            <img src="images/38.png" alt="" class="article__image">
        </p>
    </div>
    <div class="article">
        <h3 class="article__head">Установка Ubuntu Linux</h3>
        <p>Сразу хочу обратить внимание, что я привожу не все скриншоты установки, а только ключевые, где требуется
            какое-либо действие от пользователя. Кстати, если кликнуть мышкой в работающую виртуальную машину, то она
            будет перехватывать все ваши нажатия на клавиатуре или мышке. Чтобы переключиться из виртуалки в вашу
            систему, нужно нажать <b>Ctrl+Alt</b>.
        <p>
            Выбираем в окне слева нашу виртуальную машину и нажимаем зеленую кнопку "Play" сверху, после чего запустится
            процесс установки. Выбираем "Install":
            <img src="images/07.png" alt="" class="article__image">
        </p>
        <br>
        <p>Первым делом, нужно выбрать язык, который будет использоваться как в процессе установки, так и в самой
            системе. Людям, которые сталкиваются с Linux впервые, рекомендуется выбрать русский язык.
            <img src="images/08.png" alt="" class="article__image">
        </p>
        <br>
        <p>Указываем наше местонахождение:
            <img src="images/09.png" alt="" class="article__image">
        </p>
        <br>
        <p>Теперь определяем раскладку клавиатуры. Здесь выбираем "нет":
            <img src="images/10.png" alt="" class="article__image">
        </p>
        <br>
        <p>Указываем страну для раскладки, здесь это непринципиально, но от выбора зависит дальнейшее определение
            раскладки. Выбираем "Украинская":
            <img src="images/11.png" alt="" class="article__image">
        </p>
        <br>
        <p>И тип раскладки. Вводить украинские буквы нам, скорее всего, не понадобится, поэтому выбираем "Русская":
            <img src="images/12.png" alt="" class="article__image">
        </p>
        <br>
        <p>Теперь необходимо указать сочетание клавиш для смены раскладки. Можно выбрать наиболее привычную для себя
            комбинацию:
            <img src="images/13.png" alt="" class="article__image">
        </p>
        <br>
        <p>Вводим имя компьютера. В принципе, не сильно на что-то влияет, поэтому вводите, что вам хочется:
            <img src="images/14.png" alt="" class="article__image">
        </p>
        <br>
        <p>Далее нужно выбрать источник для скачивания всяких программ и установочных пакетов, выбираем "Украина", чтобы
            скачивалось быстрее:
            <img src="images/15.png" alt="" class="article__image">
        </p>
        <br>
        <p>Здесь оставляем все как есть:
            <img src="images/16.png" alt="" class="article__image">
        </p>
        <br>
        <p>И здесь тоже:
            <img src="images/17.png" alt="" class="article__image">
        </p>
        <br>
        <p>Начинается процесс установки, он длится от 15 до 40 минут, в зависимости от скорости вашего интернета:
            установщик определит доступные пакеты, начнет загрузку базовых компонент.
            <img src="images/18.png" alt="" class="article__image">
        </p>
        <br>
        <p>После будет предложено ввести имя пользователя. Здесь можете написать свои имя и фамилию или что захотите:
            <img src="images/19.png" alt="" class="article__image">
        </p>
        <br>
        <p>А вот здесь нужно ввести имя (логин), с которым будет осуществляться вход в систему, так будет называться домашний
            каталог и от этого имени будут запускаться процессы.
            <img src="images/20.png" alt="" class="article__image">
        </p>
        <br>
        <p>Далее будет предложено ввести пароль для учетной записи и его подтверждение. Ввести можно любой простой
            пароль, который будет не трудно запомнить. Разумеется, так не стоит делать в боевых условиях: простой пароль
            можно подобрать и злоумышленник получит доступ к системе, но в случае с нашей тестовой виртуалкой,
            не страшно. Ниже будет описано, как восстановить пароль, если вы его забудете или совершите ошибку в его
            наборе.
            <img src="images/21.png" alt="" class="article__image">
        </p>
        <br>
        <p>Если вы все-таки решили ввести простой пароль, будет предупреждение, с которым можно будет согласиться:
            <img src="images/22.png" alt="" class="article__image">
        </p>
        <br>
        <p>Шифровать домашний каталог нам не нужно:
            <img src="images/23.png" alt="" class="article__image">
        </p>
        <br>
        <p>Теперь процесс создания нового диска. Здесь все оставляем, как есть и записываем изменения на диск:
            <img src="images/24.png" alt="" class="article__image">
            <img src="images/25.png" alt="" class="article__image">
            <img src="images/26.png" alt="" class="article__image">
        </p>
        <br>
        <p>Далее начнется установка системы:
            <img src="images/27.png" alt="" class="article__image">
        </p>
        <br>
        <p>Здесь установщик поинтересуется, как устанавливать критические обновления. Оставляем как есть:
            <img src="images/28.png" alt="" class="article__image">
        </p>
        <br>
        <p>А теперь мы можем выбрать, какие программы и компоненты должны быть установлены в системе. Для нас достаточно
            первых двух пунктов. Загрузка и установка тоже займет какое-то время:
            <img src="images/29.png" alt="" class="article__image">
        </p>
        <br>
        <p>Устанавливаем системный загрузчик в главную загрузочную запись:
            <img src="images/30.png" alt="" class="article__image">
        </p>
        <br>
        <p>Здесь соглашаемся:
            <img src="images/31.png" alt="" class="article__image">
        </p>
        <br>
        <p>Финальный этап установки, просто жмем "Продолжить":
            <img src="images/32.png" alt="" class="article__image">
        </p>
    </div>
    <div class="article">
        <h3 class="article__head">Жизнь в новой виртуальной машине.</h3>
        <p>После перезагрузки мы можем войти в новую систему. Введите то, что указали при установке:
            <img src="images/33.png" alt="" class="article__image">
        </p>
        <br>
        <p>Если вы не ошиблись в вводе имени пользователя или пароля, то будет показано приветствие:
            <img src="images/34.png" alt="" class="article__image">
        </p>
        <br>
        <p>Теперь можно приступить к установке программ. В Ubuntu Linux существуют два менеджера пакетов:
            <b>aptitude</b> и <b>apt-get</b>. Синтаксис у них практически одинаковый, но aptitude лучше работает с
            зависимостями (это когда одна программа требует установку других программ или библиотек). Выполнять
            установку программ можно только с правами суперпользователя; мы такими правами обладаем, поэтому достаточно
            об этом сообщить — написав <b>sudo</b> перед командой, которую хотим выполнить. Обратите внимание, что
            запуск sudo потребует ввод вашего пароля.
            <br>Итак, давайте поставим несколько программ, которые нам пригодятся в дальнейшем. Для этого наберем
            в консоли и запустим:
        </p>
        <pre class="article__code">sudo aptitude install build-essential nginx nodejs npm</pre>
        <ul>
            <li><b>build-essential</b> — комплекс программ и библиотек, необходимых для компилирования исходных кодов в
                исполняемые файлы;</li>
            <li><b>nginx</b> — очень мощный и быстрый веб-сервер;</li>
            <li><b>nodejs</b> — окружение для серверной разработки на языке JavaScript;</li>
            <li><b>npm</b> — менеджер пакетов. Как aptitude, только для nodejs.</li>
        </ul>
        <p>Соглашаемся: <img src="images/35.png" alt="" class="article__image"></p>
        <br>
        <p>Кстати, как выключить или перезагрузить виртуалку? Все очень просто — выключается так:</p>
        <pre class="article__code">sudo halt</pre>
        <p>А перезагружается так:</p>
        <pre class="article__code">sudo reboot</pre>
        <br>
        <p>Помните, мы в самом начале указывали, какие папки будут использоваться для общего доступа? Так вот, это еще
            не все. Фактически, у нас два пути: поставить дополнительные компоненты виртуальной машины или поставить
            файловый сервер Samba, провозившись с правкой конфигурационных файлов. Пожалуй, выберем первое.
            Инициализируем установку:
            <img src="images/39.png" alt="" class="article__image">
        </p>
        <br>
        <p>Может ругнуться на то, что в виртуальной машине уже подключен другой диск. Жмем "Yes":
            <img src="images/40.png" alt="" class="article__image">
        </p>
        <br>
        <p>И это еще не все. Теперь нам необходимо примонтировать наш виртуальный диск к системе. Для начала создадим
            папку, куда примонтируем наш диск:
        </p>
        <pre class="article__code">sudo mkdir /media/cdrom</pre>
        <p>А теперь примонтируем:</p>
        <pre class="article__code">sudo mkdir /media/cdrom</pre>
        <p>Как видите, нам и здесь понадобилось запустить команды с правами суперпользователя. А все потому, что мы
            решили создать новую папку в директории, которая принадлежит не нам. Ну и монтировать диски может только
            суперпользователь.
            <img src="images/41.png" alt="" class="article__image">
        </p>
        <br>
        <p>Распакуем архив с диска в нашу домашнюю папку и запустим установку. Если вы не в домашней директории, просто
            выполните в консоли <b>cd</b>.</p>
        <pre class="article__code">tar -zxf /media/cdrom/VMwareTools-9.6.1-1378637.tar.gz</pre>
        <p><b>tar</b> — это такая консольная программа для работы с архивами. Не исключено, что имя архива у вас может
            отличаться, поэтому я рекомендую набрать</p>
        <pre class="article__code">tar -zxf /media/cdrom/VM</pre>
        <p>и нажать кнопку <b>tab</b>, после
            чего подставится правильное имя архива.<br> Если вы все сделали правильно, то в вашей домашней директории
            должна появиться папка <b>vmware-tools-distrib</b>, можем даже изучить ее содержимое, для этого достаточно
            набрать</p>
        <pre class="article__code">ln -s vmware-tools-distrib</pre>
        <p>Про tab помните?
            <img src="images/42.png" alt="" class="article__image">
        </p>
        <br>
        <p>Можно запускать установку. Для этого выполним</p>
        <pre class="article__code">./vmware-tools-distrib/vmware-install.pl</pre>
        <p>Точка в начале говорит о том, что файл нужно запустить.
            <img src="images/43.png" alt="" class="article__image">
            На вопросы установщика можно просто нажимать Enter. Единственный момент, это можно не ставить поддержку
            drag-n-drop, потому что она нам не понадобится. Но опять же, можно не заморачиваться.
            <img src="images/44.png" alt="" class="article__image">
        </p>
        <br>
        <p>Если установка прошла успешно (по идее, никаких сюрпризов быть не должно), то вам становится доступной та
            самая общая папка, которую мы указали в самом начале. Все папки, которые вы будете задавать в настройках
            шары, внутри виртуальной машины будут доступны по пути <b>/mnt/hgfs</b>. Проверим:
        </p>
        <pre class="article__code">ls -la /mnt/hgfs</pre>
        <p>Вы должны увидеть имя папки, в моем случае, это <b>projects</b>. Давайте еще для удобства сделаем ссылку на
            эту папку, чтобы можно было быстро к ней обращаться из домашней директории:</p>
        <pre class="article__code">ln -s /mnt/hgfs/projects</pre>
        <p>Ну и проверим, создалась ли ссылка:</p>
        <pre class="article__code">ls -la</pre>
        <p>Результат наших стараний:
            <img src="images/45.png" alt="" class="article__image">
        </p>
        <br>
        <p>Давайте убедимся, что мы можем не только видеть нашу общую папку, но еще и создавать там новые файлы и
            папки:</p>
        <pre class="article__code">touch projects/index.html</pre>
        <p>Команда <b>touch</b> создает пустой файл с указанным именем. <br>Проверим, создался ли файл. Для этого в
            оригинальной системе откроем нашу общую папку. Как видите, мы можем не только читать, но и писать:
            <img src="images/46.png" alt="" class="article__image">
        <br>
        <p>Вот и все. Мы создали новую виртуальную машину, затем установили на нее Linux, поставили программы и
            научили работать систему с общими папками. Напоследок, включим возможность входа в систему без пароля. Для
            этого нам нужно отредактировать один конфигурационный файл. Для этого выполним:</p>
        <pre class="article__code">sudo vim /etc/init/tty1.conf</pre>
        <p><b>vim</b> — хоть и не простой, но очень мощный консольный текстовый редактор. Сперва нам нужно перейти
            в режим правки, для этого нажмите <b>a</b>, удалите последнуюю строчку, а затем наберите там</p>
        <pre class="article__code">exec /bin/login -f ubuntu < /dev/tty1 > /dev/tty1 2>&1</pre>
        <p>где вместо "ubuntu" введите то имя пользователя (логин), которое задали при установке. Убедитесь, что все
            ввели правильно, перед тем, как сохраниться. А чтобы сохраниться, нужно сначала нажать <b>Esc</b>, затем
            набрать <b>:wq</b> и нажать <b>Enter</b>. Если вы случайно стерли не то или произошло еще что-нибудь
            странное, то нужно сделать так же, как и при сохранении, только в конце написать восклицательный знак и
            тогда файл не сохранится. А если все сделано правильно, то после перезагрузки вводить пароль
            не прийдется. <img src="images/47.png" alt="" class="article__image"></p>
    </div>
    <div class="article">
        <h3 class="article__head">Восстановление забытого пароля.</h3>
        <p>При запуске виртуальной машины необходимо зажать кнопку <b>Ctrl</b>. Должен появиться такой диалог, где
            нужно выбрать второй пункт:
            <img src="images/48.png" alt="" class="article__image">
            А потом еще раз второй пункт:
            <img src="images/49.png" alt="" class="article__image">
        </p>
        <br>
        <p>В новом диалоге выбираем <b>Перейти в командный интерпретатор суперпользователя:</b>
            <img src="images/50.png" alt="" class="article__image"></p>
        <br>
        <p>Итак, нам доступна консоль. Примонтируем файловую систему:</p>
        <pre class="article__code">mount -rw -o remount /</pre>
        <p>А теперь поменяем пароль:</p>
        <pre class="article__code">passwd ubuntu</pre>
        <p>Где вместо <b>ubuntu</b> вы вводите свой логин. Будет предложено дваджы ввести новый пароль, а затем можно
            перезагрузиться и войти как обычно, под своим пользователем.
            <img src="images/51.png" alt="" class="article__image">
        </p>
    </div>
</body>
</html>